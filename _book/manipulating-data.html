<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Manipulating Data | An Introduction to R for Quantitative Methods</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Manipulating Data | An Introduction to R for Quantitative Methods" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Manipulating Data | An Introduction to R for Quantitative Methods" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="" />


<meta name="date" content="2023-02-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="statistical-analysis.html"/>
<link rel="next" href="graphics.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R4QM</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>PREFACE</a></li>
<li class="chapter" data-level="1" data-path="an-introduction.html"><a href="an-introduction.html"><i class="fa fa-check"></i><b>1</b> An Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="an-introduction.html"><a href="an-introduction.html#getting-started-in-r-with-rstudio"><i class="fa fa-check"></i>Getting Started in R with RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="an-introduction.html"><a href="an-introduction.html#r"><i class="fa fa-check"></i>R</a></li>
<li class="chapter" data-level="" data-path="an-introduction.html"><a href="an-introduction.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="an-introduction.html"><a href="an-introduction.html#rmarkdown"><i class="fa fa-check"></i>RMarkdown</a></li>
</ul></li>
<li class="chapter" data-level="1.1" data-path="an-introduction.html"><a href="an-introduction.html#objects"><i class="fa fa-check"></i><b>1.1</b> Objects</a></li>
<li class="chapter" data-level="1.2" data-path="an-introduction.html"><a href="an-introduction.html#arithmetic-and-parentheses"><i class="fa fa-check"></i><b>1.2</b> Arithmetic and Parentheses</a></li>
<li class="chapter" data-level="1.3" data-path="an-introduction.html"><a href="an-introduction.html#help"><i class="fa fa-check"></i><b>1.3</b> Help!</a></li>
<li class="chapter" data-level="1.4" data-path="an-introduction.html"><a href="an-introduction.html#functions"><i class="fa fa-check"></i><b>1.4</b> Functions</a></li>
<li class="chapter" data-level="1.5" data-path="an-introduction.html"><a href="an-introduction.html#vectors-matrices-and-arrays"><i class="fa fa-check"></i><b>1.5</b> Vectors, Matrices, and Arrays</a></li>
<li class="chapter" data-level="1.6" data-path="an-introduction.html"><a href="an-introduction.html#data-frames-lists-and-attributes"><i class="fa fa-check"></i><b>1.6</b> Data Frames, Lists, and Attributes</a></li>
<li class="chapter" data-level="1.7" data-path="an-introduction.html"><a href="an-introduction.html#packages"><i class="fa fa-check"></i><b>1.7</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="statistical-analysis.html"><a href="statistical-analysis.html"><i class="fa fa-check"></i><b>2</b> Statistical Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="statistical-analysis.html"><a href="statistical-analysis.html#course-data"><i class="fa fa-check"></i>Course Data</a></li>
<li class="chapter" data-level="2.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#one-sample-t-test"><i class="fa fa-check"></i><b>2.1</b> One-sample t-test and interval</a></li>
<li class="chapter" data-level="2.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#other-hypothesis-tests"><i class="fa fa-check"></i><b>2.2</b> Other Basic Hypothesis Tests</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#two-sample-t-test-and-interval"><i class="fa fa-check"></i><b>2.2.1</b> Two-sample t-test and interval</a></li>
<li class="chapter" data-level="2.2.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#paired-t-test-and-confidence-interval"><i class="fa fa-check"></i><b>2.2.2</b> Paired t-test and confidence interval</a></li>
<li class="chapter" data-level="2.2.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#chi-square-test-and-interval-for-one-variance"><i class="fa fa-check"></i><b>2.2.3</b> Chi-square test and interval for one variance</a></li>
<li class="chapter" data-level="2.2.4" data-path="statistical-analysis.html"><a href="statistical-analysis.html#f-test-for-two-variances"><i class="fa fa-check"></i><b>2.2.4</b> F test for two variances</a></li>
<li class="chapter" data-level="2.2.5" data-path="statistical-analysis.html"><a href="statistical-analysis.html#two-sample-modified-levenes-test"><i class="fa fa-check"></i><b>2.2.5</b> Two-sample Modified Levene’s Test</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#one-way-anova"><i class="fa fa-check"></i><b>2.3</b> One-way ANOVA and Multiple Comparisons</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#one-way-anova-1"><i class="fa fa-check"></i><b>2.3.1</b> One-way ANOVA</a></li>
<li class="chapter" data-level="2.3.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#modified-levene-test"><i class="fa fa-check"></i><b>2.3.2</b> Modified Levene Test</a></li>
<li class="chapter" data-level="2.3.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#all-pairwise-comparisons---tukeys-hsd-and-scheffe"><i class="fa fa-check"></i><b>2.3.3</b> All Pairwise Comparisons - Tukey’s HSD and Scheffe</a></li>
<li class="chapter" data-level="2.3.4" data-path="statistical-analysis.html"><a href="statistical-analysis.html#comparison-to-a-control---dunnetts-method"><i class="fa fa-check"></i><b>2.3.4</b> Comparison to a Control - Dunnett’s method</a></li>
<li class="chapter" data-level="2.3.5" data-path="statistical-analysis.html"><a href="statistical-analysis.html#specific-contrasts---step-wise-bonferroni-and-scheffe"><i class="fa fa-check"></i><b>2.3.5</b> Specific Contrasts - Step-wise Bonferroni and Scheffe</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="statistical-analysis.html"><a href="statistical-analysis.html#regression-ancova"><i class="fa fa-check"></i><b>2.4</b> Regression, Factorial ANOVA, and ANCOVA:</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="statistical-analysis.html"><a href="statistical-analysis.html#simple-linear-regression"><i class="fa fa-check"></i><b>2.4.1</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="2.4.2" data-path="statistical-analysis.html"><a href="statistical-analysis.html#box-cox-transformation"><i class="fa fa-check"></i><b>2.4.2</b> Box-Cox Transformation</a></li>
<li class="chapter" data-level="2.4.3" data-path="statistical-analysis.html"><a href="statistical-analysis.html#multiple-linear-regression"><i class="fa fa-check"></i><b>2.4.3</b> Multiple Linear Regression</a></li>
<li class="chapter" data-level="2.4.4" data-path="statistical-analysis.html"><a href="statistical-analysis.html#variable-selection"><i class="fa fa-check"></i><b>2.4.4</b> Variable Selection</a></li>
<li class="chapter" data-level="2.4.5" data-path="statistical-analysis.html"><a href="statistical-analysis.html#outlier-diagnostics"><i class="fa fa-check"></i><b>2.4.5</b> Outlier Diagnostics</a></li>
<li class="chapter" data-level="2.4.6" data-path="statistical-analysis.html"><a href="statistical-analysis.html#prediction-intervals-and-confidence-intervals-for-the-regression-line"><i class="fa fa-check"></i><b>2.4.6</b> Prediction Intervals and Confidence Intervals for the Regression Line</a></li>
<li class="chapter" data-level="2.4.7" data-path="statistical-analysis.html"><a href="statistical-analysis.html#factorial-anova"><i class="fa fa-check"></i><b>2.4.7</b> Factorial ANOVA</a></li>
<li class="chapter" data-level="2.4.8" data-path="statistical-analysis.html"><a href="statistical-analysis.html#ancova"><i class="fa fa-check"></i><b>2.4.8</b> ANCOVA</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="statistical-analysis.html"><a href="statistical-analysis.html#other-methods"><i class="fa fa-check"></i><b>2.5</b> Other Methods</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>3</b> Manipulating Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="manipulating-data.html"><a href="manipulating-data.html#loading-and-saving-data"><i class="fa fa-check"></i><b>3.1</b> Loading and Saving Data</a></li>
<li class="chapter" data-level="3.2" data-path="manipulating-data.html"><a href="manipulating-data.html#data-frames-versus-matrices"><i class="fa fa-check"></i><b>3.2</b> Data Frames versus Matrices</a></li>
<li class="chapter" data-level="3.3" data-path="manipulating-data.html"><a href="manipulating-data.html#applying-functions-to-a-matrix"><i class="fa fa-check"></i><b>3.3</b> Applying Functions to a Matrix</a></li>
<li class="chapter" data-level="3.4" data-path="manipulating-data.html"><a href="manipulating-data.html#lists"><i class="fa fa-check"></i><b>3.4</b> Lists</a></li>
<li class="chapter" data-level="3.5" data-path="manipulating-data.html"><a href="manipulating-data.html#an-example"><i class="fa fa-check"></i><b>3.5</b> An example</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>4</b> Graphics</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="graphics.html"><a href="graphics.html#annotations"><i class="fa fa-check"></i><b>4.0.1</b> Annotations</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="psychometric-packages.html"><a href="psychometric-packages.html"><i class="fa fa-check"></i><b>5</b> Psychometric Packages</a></li>
<li class="chapter" data-level="6" data-path="function-writing.html"><a href="function-writing.html"><i class="fa fa-check"></i><b>6</b> Function Writing</a></li>
<li class="chapter" data-level="7" data-path="sample-simulations.html"><a href="sample-simulations.html"><i class="fa fa-check"></i><b>7</b> Sample Simulations</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R for Quantitative Methods</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipulating-data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Manipulating Data<a href="manipulating-data.html#manipulating-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="loading-and-saving-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Loading and Saving Data<a href="manipulating-data.html#loading-and-saving-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Previously, we read in the data set <code>sctable</code>:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="manipulating-data.html#cb183-1" aria-hidden="true" tabindex="-1"></a>sctable <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_table</span>(<span class="st">&quot;data/scdata.txt&quot;</span>)</span></code></pre></div>
<p>A table can be saved using:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="manipulating-data.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(sctable[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, ], <span class="st">&quot;data/scdata2.txt&quot;</span>, <span class="at">quote =</span> F)</span></code></pre></div>
<p>If <code>quote = F</code> is not used, then any columns of characters will be saved with quotation marks around them. By default, the table headings were saved with this file (go check!). It is always good to view your file before opening to check if you have column headings or not.</p>
<p>Other commands for reading and writing data are <code>read.delim()</code>, <code>read.csv()</code>, <code>write.csv()</code>, and <code>read.fwf()</code>.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="manipulating-data.html#cb185-1" aria-hidden="true" tabindex="-1"></a>mdatab1 <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;data/mdatab.txt&quot;</span>, <span class="at">head =</span> F)</span>
<span id="cb185-2"><a href="manipulating-data.html#cb185-2" aria-hidden="true" tabindex="-1"></a>mdatab1[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## [1] 1.101111e+31 1.111110e+31</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="manipulating-data.html#cb187-1" aria-hidden="true" tabindex="-1"></a>mdatab2 <span class="ot">&lt;-</span> <span class="fu">read.fwf</span>(<span class="st">&quot;data/mdatab.txt&quot;</span>, <span class="at">widths =</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">32</span>))</span>
<span id="cb187-2"><a href="manipulating-data.html#cb187-2" aria-hidden="true" tabindex="-1"></a>mdatab2[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>##   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18 V19 V20 V21
## 1  1  1  0  1  1  1  1  1  1   1   0   0   0   1   1   0   0   0   0   0   0
## 2  1  1  1  1  1  1  0  0  1   1   0   0   0   0   0   0   1   0   1   0   0
##   V22 V23 V24 V25 V26 V27 V28 V29 V30 V31 V32
## 1   0   1   1   1   0   0   0   0   0   1   0
## 2   0   1   0   0   0   1   0   0   0   0   0</code></pre>
<p>If your data doesn’t follow one of these easily used formats, then the function <code>scan()</code> can also be useful.</p>
</div>
<div id="data-frames-versus-matrices" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Data Frames versus Matrices<a href="manipulating-data.html#data-frames-versus-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>While tables are convenient for storing and viewing data sets (they can have multiple types of variables in them), many of the statistical functions require that the data to be in matrix form. It is often easiest to create these matrices immediately and avoid the error messages later.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="manipulating-data.html#cb189-1" aria-hidden="true" tabindex="-1"></a>scdata <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(sctable[, <span class="dv">3</span><span class="sc">:</span><span class="dv">27</span>])</span>
<span id="cb189-2"><a href="manipulating-data.html#cb189-2" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(sctable[, <span class="dv">1</span>])</span>
<span id="cb189-3"><a href="manipulating-data.html#cb189-3" aria-hidden="true" tabindex="-1"></a>regions <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(sctable[, <span class="dv">2</span>])</span></code></pre></div>
<p>Subsets of both tables and matrices are referred to in the same manner, by using brackets, with the selected rows first, followed by the selected columns.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="manipulating-data.html#cb190-1" aria-hidden="true" tabindex="-1"></a>sctable[<span class="fu">c</span>(<span class="dv">34</span>, <span class="dv">38</span>), <span class="fu">c</span>(<span class="dv">18</span><span class="sc">:</span><span class="dv">21</span>)]</span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   NoCar PlumProb PoorChild Unemp
##   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1  15.8      1.3      31.8   8.2
## 2  12.8      1        27.3   8.5</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="manipulating-data.html#cb192-1" aria-hidden="true" tabindex="-1"></a>scdata[<span class="fu">c</span>(<span class="dv">34</span>, <span class="dv">38</span>), <span class="fu">c</span>(<span class="dv">16</span><span class="sc">:</span><span class="dv">19</span>)]</span></code></pre></div>
<pre><code>##      NoCar PlumProb PoorChild Unemp
## [1,]  15.8      1.3      31.8   8.2
## [2,]  12.8      1.0      27.3   8.5</code></pre>
<p>Producing these (apparently) same results required different columns because the matrix was missing the two columns of characters. It is often useful to examine a matrix or table that is too large to fit on the screen by selecting either the first few rows, or by checking its dimension:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="manipulating-data.html#cb194-1" aria-hidden="true" tabindex="-1"></a>scdata[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>##      Births Death InfMort Minority Over65 PopChng PopDens Urban Income ConsInc
## [1,]   12.5  10.3    15.1     31.7   14.7     9.7    51.5  23.4  32635   110.0
## [2,]   12.1   9.8     9.6     28.6   12.8    17.8   132.8  60.9  37889   517.1
##      FarmInc ManIncom RetInc FdStmps MoblHms NoCar PlumProb PoorChild Unemp
## [1,]   298.7   3729.5  241.2    18.0    27.4   8.4      1.0      17.1   5.1
## [2,]   343.3   7553.2  738.6    18.1    24.2   7.3      0.4      18.0   5.9
##      Coll4 Crime HSGrad JuvDel MVDeath SchlSpnd
## [1,]  12.7 368.0   70.1     40    37.9     7158
## [2,]  19.9 364.8   77.7     66    19.8     6651</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="manipulating-data.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(scdata)</span></code></pre></div>
<pre><code>## [1] 46 25</code></pre>
<p>Note that there are often several ways to refer to the variables that you want to work with.</p>
<ul>
<li><code>sctable$Income</code></li>
<li><code>sctable[, "Income"]</code></li>
<li><code>sctable[, 11]</code></li>
<li><code>scdata$Income</code></li>
<li><code>scdata[, "Income"]</code></li>
<li><code>scdata[, 9]</code></li>
</ul>
<p>Notice that the fourth option did not work. Checking the attributes (with <code>attributes(sctable)</code> and <code>attributes(scdata)</code>) of the data frame and the matrix demonstrates why. The former has each column name listed under <code>$names</code> (and so you can access them using <code>$</code>), while the matrix does not.</p>
<p>These abbreviations can also be used when just asking for just a subset of rows and columns:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="manipulating-data.html#cb198-1" aria-hidden="true" tabindex="-1"></a>scdata[regions <span class="sc">==</span> <span class="st">&quot;Upstate&quot;</span>, <span class="fu">c</span>(<span class="dv">8</span><span class="sc">:</span><span class="dv">10</span>)]</span></code></pre></div>
<pre><code>##       Urban Income ConsInc
##  [1,]  23.4  32635   110.0
##  [2,]  58.3  36807   447.2
##  [3,]  38.7  33787   996.8
##  [4,]  32.7  32425   461.1
##  [5,]  83.0  41149  2144.7
##  [6,]  56.8  34702   534.9
##  [7,]  34.3  33933   172.7
##  [8,]   0.0  31577   169.8
##  [9,]  29.4  36666   502.4
## [10,]  58.3  36214   504.2
## [11,]  64.8  37579   994.4
## [12,]  35.7  31441    89.9
## [13,]  64.3  44539   552.7</code></pre>
<p>It is possible to use logical operators to ask for only particular rows or columns of a matrix or data frame, or particular elements of a vector.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="manipulating-data.html#cb200-1" aria-hidden="true" tabindex="-1"></a>sctable[sctable<span class="sc">$</span>Income <span class="sc">&gt;</span> <span class="dv">40000</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 5 × 27
##   County Region Births Death InfMort Minor…¹ Over65 PopChng PopDens Urban Income
##   &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 Beauf… LowCo…   15.8   7.8     9      29.3   15.5    39.9    206   71.4  46992
## 2 Dorch… LowCo…   12.9   7.6     6      28.9    9.1    16.1    168.  73    43316
## 3 Green… Upsta…   14     8.4     5.1    22.5   11.7    18.6    479.  83    41149
## 4 Lexin… Midla…   14     8.1     6.6    15.8   10.2    28.9    308.  66.3  44659
## 5 York   Upsta…   13.4   7.7     7.6    22.7   10.4    25.2    241.  64.3  44539
## # … with 16 more variables: ConsInc &lt;dbl&gt;, FarmInc &lt;dbl&gt;, ManIncom &lt;dbl&gt;,
## #   RetInc &lt;dbl&gt;, FdStmps &lt;dbl&gt;, MoblHms &lt;dbl&gt;, NoCar &lt;dbl&gt;, PlumProb &lt;dbl&gt;,
## #   PoorChild &lt;dbl&gt;, Unemp &lt;dbl&gt;, Coll4 &lt;dbl&gt;, Crime &lt;dbl&gt;, HSGrad &lt;dbl&gt;,
## #   JuvDel &lt;dbl&gt;, MVDeath &lt;dbl&gt;, SchlSpnd &lt;dbl&gt;, and abbreviated variable name
## #   ¹​Minority</code></pre>
<p>returns only those rows (the logical statement is before the comma) whose incomes are greater than 40000. Other logical operators include:</p>
<ul>
<li><code>!=</code>: is not equal to</li>
<li><code>&lt;</code>: less than</li>
<li><code>&lt;=</code>: less than or equal to</li>
<li><code>&gt;=</code>: greater than or equal to</li>
<li><code>&amp;</code>: and</li>
<li><code>|</code>: or</li>
</ul>
<p>The function order (and its relatives index and sort) are often useful as well:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="manipulating-data.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(sctable<span class="sc">$</span>Income)</span></code></pre></div>
<pre><code>##  [1] 20898 24007 24214 26526 26598 26630 26907 27131 28591 28771 29483 29567
## [13] 29733 30376 30727 31087 31441 31577 32425 32635 32736 32867 33278 33787
## [25] 33933 34688 34702 35144 35146 35312 35774 36214 36470 36666 36807 37579
## [37] 37810 37889 38804 39908 39961 41149 43316 44539 44659 46992</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="manipulating-data.html#cb204-1" aria-hidden="true" tabindex="-1"></a>sctable[<span class="fu">order</span>(sctable<span class="sc">$</span>Income), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">11</span>)]</span></code></pre></div>
<pre><code>## # A tibble: 46 × 3
##    County       Region     Income
##    &lt;chr&gt;        &lt;chr&gt;       &lt;dbl&gt;
##  1 Allendale    LowCountry  20898
##  2 Bamberg      Midlands    24007
##  3 Williamsburg Peedee      24214
##  4 Marion       Peedee      26526
##  5 Marlboro     Peedee      26598
##  6 Dillon       Peedee      26630
##  7 Lee          Peedee      26907
##  8 Clarendon    Midlands    27131
##  9 Barnwell     Midlands    28591
## 10 Hampton      LowCountry  28771
## # … with 36 more rows</code></pre>
<p>While the matrix scdata inherited col names from the table used to create it, it currently lacks names for the rows.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="manipulating-data.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rownames(scdata) &lt;- sctable[, 1]</span></span>
<span id="cb206-2"><a href="manipulating-data.html#cb206-2" aria-hidden="true" tabindex="-1"></a>upinc <span class="ot">&lt;-</span> scdata[regions <span class="sc">==</span> <span class="st">&quot;Upstate&quot;</span>, <span class="dv">9</span>]</span>
<span id="cb206-3"><a href="manipulating-data.html#cb206-3" aria-hidden="true" tabindex="-1"></a>midinc <span class="ot">&lt;-</span> scdata[regions <span class="sc">==</span> <span class="st">&quot;Midlands&quot;</span>, <span class="dv">9</span>]</span>
<span id="cb206-4"><a href="manipulating-data.html#cb206-4" aria-hidden="true" tabindex="-1"></a>upinc</span></code></pre></div>
<pre><code>##  [1] 32635 36807 33787 32425 41149 34702 33933 31577 36666 36214 37579 31441
## [13] 44539</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="manipulating-data.html#cb208-1" aria-hidden="true" tabindex="-1"></a>midinc</span></code></pre></div>
<pre><code>##  [1] 37889 24007 28591 32736 27131 35146 30376 38804 34688 44659 32867 29567
## [13] 39961 35774 33278</code></pre>
<p>In addition to assigning names to the rows and columns, new values can also be assigned over the previous value within the matrix:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="manipulating-data.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Xmat</span></span>
<span id="cb210-2"><a href="manipulating-data.html#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Xmat[1, 2] &lt;- 99</span></span>
<span id="cb210-3"><a href="manipulating-data.html#cb210-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Xmat</span></span></code></pre></div>
</div>
<div id="applying-functions-to-a-matrix" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Applying Functions to a Matrix<a href="manipulating-data.html#applying-functions-to-a-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Many statistical procedures involve finding the value of a statistic separately for each row or column of a matrix. One way to do this is to use a loop. If this method is used it is necessary to first create a vector for the calculated values to be stored in:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="manipulating-data.html#cb211-1" aria-hidden="true" tabindex="-1"></a>colmeans <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="fu">ncol</span>(scdata))</span>
<span id="cb211-2"><a href="manipulating-data.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(scdata)) {</span>
<span id="cb211-3"><a href="manipulating-data.html#cb211-3" aria-hidden="true" tabindex="-1"></a>  colmeans[i] <span class="ot">&lt;-</span> <span class="fu">mean</span>(scdata[, i])</span>
<span id="cb211-4"><a href="manipulating-data.html#cb211-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb211-5"><a href="manipulating-data.html#cb211-5" aria-hidden="true" tabindex="-1"></a>colmeans</span></code></pre></div>
<pre><code>##  [1] 1.288043e+01 9.958696e+00 1.030652e+01 4.001522e+01 1.270000e+01
##  [6] 1.365870e+01 1.230696e+02 4.268913e+01 3.359683e+04 4.770609e+02
## [11] 5.935913e+02 2.552570e+03 7.234891e+02 2.683913e+01 2.627609e+01
## [16] 1.102391e+01 9.065217e-01 2.214783e+01 6.630435e+00 1.556522e+01
## [21] 4.677804e+02 7.143043e+01 6.576087e+01 3.070652e+01 7.750783e+03</code></pre>
<p>The rep function repeats the first argument (0 in this case) the number of times equal to the second argument (the number of columns of <code>scdata</code>). Similar to <code>ncol()</code>, the function <code>nrow()</code> would return the number of rows in a matrix, and length returns the number of elements in a vector.</p>
<p>An easier way to arrive at the same result is to use the <code>apply()</code> function:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="manipulating-data.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(scdata, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>##       Births        Death      InfMort     Minority       Over65      PopChng 
## 1.288043e+01 9.958696e+00 1.030652e+01 4.001522e+01 1.270000e+01 1.365870e+01 
##      PopDens        Urban       Income      ConsInc      FarmInc     ManIncom 
## 1.230696e+02 4.268913e+01 3.359683e+04 4.770609e+02 5.935913e+02 2.552570e+03 
##       RetInc      FdStmps      MoblHms        NoCar     PlumProb    PoorChild 
## 7.234891e+02 2.683913e+01 2.627609e+01 1.102391e+01 9.065217e-01 2.214783e+01 
##        Unemp        Coll4        Crime       HSGrad       JuvDel      MVDeath 
## 6.630435e+00 1.556522e+01 4.677804e+02 7.143043e+01 6.576087e+01 3.070652e+01 
##     SchlSpnd 
## 7.750783e+03</code></pre>
<p><code>apply()</code> is read in reverse - the above code says to apply the mean to the columns (rows=1, columns=2) of <code>scdata</code>. Apply can also be used with functions that return more than a single value, for example:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="manipulating-data.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(scdata, <span class="dv">2</span>, summary)</span></code></pre></div>
<pre><code>##           Births     Death  InfMort Minority Over65 PopChng  PopDens    Urban
## Min.     7.60000  6.600000  3.90000  9.70000  7.900 -4.4000  27.5000  0.00000
## 1st Qu. 12.12500  8.950000  7.60000 28.67500 11.825  8.2250  49.0000 26.50000
## Median  12.80000 10.150000  8.95000 39.10000 12.650 12.1500  74.2000 38.65000
## Mean    12.88043  9.958696 10.30652 40.01522 12.700 13.6587 123.0696 42.68913
## 3rd Qu. 13.87500 10.975000 12.55000 53.82500 13.775 18.0000 157.3500 60.05000
## Max.    15.80000 13.200000 21.70000 72.60000 16.500 39.9000 479.3000 87.20000
##           Income   ConsInc   FarmInc ManIncom    RetInc  FdStmps  MoblHms
## Min.    20898.00    0.0000   42.7000   204.10  203.5000  8.50000  6.60000
## 1st Qu. 29608.50  157.0750  217.6250  1632.10  459.1750 16.32500 22.87500
## Median  33532.50  414.2000  398.9500  2304.80  662.4500 23.85000 27.00000
## Mean    33596.83  477.0609  593.5913  2552.57  723.4891 26.83913 26.27609
## 3rd Qu. 36771.75  562.6500  800.2000  3513.30  939.1000 34.05000 32.67500
## Max.    46992.00 2144.7000 2705.8000  7553.20 1623.5000 70.30000 39.10000
##            NoCar  PlumProb PoorChild     Unemp    Coll4    Crime   HSGrad
## Min.     5.30000 0.3000000  10.20000  3.700000  8.30000 212.5000 60.00000
## 1st Qu.  8.17500 0.5250000  16.10000  5.325000 11.42500 340.1500 66.90000
## Median  10.50000 0.8000000  20.95000  6.350000 14.30000 479.4500 69.95000
## Mean    11.02391 0.9065217  22.14783  6.630435 15.56522 467.7804 71.43043
## 3rd Qu. 13.10000 1.3000000  27.37500  7.775000 18.70000 580.1500 74.97500
## Max.    21.80000 1.9000000  48.60000 11.700000 33.20000 834.7000 87.80000
##            JuvDel   MVDeath  SchlSpnd
## Min.     17.00000   9.80000  6604.000
## 1st Qu.  45.50000  19.80000  7047.750
## Median   61.00000  24.50000  7470.000
## Mean     65.76087  30.70652  7750.783
## 3rd Qu.  84.50000  38.45000  8242.000
## Max.    179.00000 128.60000 11499.000</code></pre>
<p>In this case, the output of the summary function is a table, and so apply simply bound all of the tables from each of the columns together. In other cases the output might be in the form of a list:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="manipulating-data.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(scdata, <span class="dv">2</span>, t.test)</span></code></pre></div>
<pre><code>## $Births
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 57.784, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  12.43148 13.32939
## sample estimates:
## mean of x 
##  12.88043 
## 
## 
## $Death
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 45.739, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##   9.520164 10.397227
## sample estimates:
## mean of x 
##  9.958696 
## 
## 
## $InfMort
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 15.545, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##   8.971142 11.641902
## sample estimates:
## mean of x 
##  10.30652 
## 
## 
## $Minority
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 17.018, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  35.27944 44.75099
## sample estimates:
## mean of x 
##  40.01522 
## 
## 
## $Over65
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 48.761, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  12.17542 13.22458
## sample estimates:
## mean of x 
##      12.7 
## 
## 
## $PopChng
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 9.2571, df = 45, p-value = 5.512e-12
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  10.68693 16.63046
## sample estimates:
## mean of x 
##   13.6587 
## 
## 
## $PopDens
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 7.7508, df = 45, p-value = 7.966e-10
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##   91.08884 155.05029
## sample estimates:
## mean of x 
##  123.0696 
## 
## 
## $Urban
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 12.775, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  35.95869 49.41958
## sample estimates:
## mean of x 
##  42.68913 
## 
## 
## $Income
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 39.58, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  31887.19 35306.46
## sample estimates:
## mean of x 
##  33596.83 
## 
## 
## $ConsInc
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 7.7445, df = 45, p-value = 8.137e-10
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  352.9918 601.1299
## sample estimates:
## mean of x 
##  477.0609 
## 
## 
## $FarmInc
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 7.2658, df = 45, p-value = 4.117e-09
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  429.0469 758.1357
## sample estimates:
## mean of x 
##  593.5913 
## 
## 
## $ManIncom
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 11.973, df = 45, p-value = 1.381e-15
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  2123.161 2981.979
## sample estimates:
## mean of x 
##   2552.57 
## 
## 
## $RetInc
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 13.42, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  614.9073 832.0709
## sample estimates:
## mean of x 
##  723.4891 
## 
## 
## $FdStmps
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 12.751, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  22.59984 31.07842
## sample estimates:
## mean of x 
##  26.83913 
## 
## 
## $MoblHms
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 22.86, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  23.96099 28.59118
## sample estimates:
## mean of x 
##  26.27609 
## 
## 
## $NoCar
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 18.996, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##   9.855049 12.192777
## sample estimates:
## mean of x 
##  11.02391 
## 
## 
## $PlumProb
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 13.636, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  0.7726279 1.0404156
## sample estimates:
## mean of x 
## 0.9065217 
## 
## 
## $PoorChild
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 18.57, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  19.74571 24.54995
## sample estimates:
## mean of x 
##  22.14783 
## 
## 
## $Unemp
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 24.739, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  6.090616 7.170254
## sample estimates:
## mean of x 
##  6.630435 
## 
## 
## $Coll4
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 16.956, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  13.71633 17.41410
## sample estimates:
## mean of x 
##  15.56522 
## 
## 
## $Crime
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 19.995, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  420.6604 514.9005
## sample estimates:
## mean of x 
##  467.7804 
## 
## 
## $HSGrad
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 72.262, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  69.43950 73.42137
## sample estimates:
## mean of x 
##  71.43043 
## 
## 
## $JuvDel
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 15.503, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  57.21732 74.30442
## sample estimates:
## mean of x 
##  65.76087 
## 
## 
## $MVDeath
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 10.806, df = 45, p-value = 4.341e-14
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  24.98308 36.42996
## sample estimates:
## mean of x 
##  30.70652 
## 
## 
## $SchlSpnd
## 
##  One Sample t-test
## 
## data:  newX[, i]
## t = 52.233, df = 45, p-value &lt; 2.2e-16
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  7451.912 8049.653
## sample estimates:
## mean of x 
##  7750.783</code></pre>
</div>
<div id="lists" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Lists<a href="manipulating-data.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lists are perhaps the most free-form of R’s various objects:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="manipulating-data.html#cb219-1" aria-hidden="true" tabindex="-1"></a>valuelist <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">means =</span> <span class="fu">apply</span>(scdata, <span class="dv">2</span>, mean), <span class="at">t.test.1 =</span> <span class="fu">t.test</span>(scdata[<span class="dv">1</span>, ]))</span>
<span id="cb219-2"><a href="manipulating-data.html#cb219-2" aria-hidden="true" tabindex="-1"></a>valuelist</span></code></pre></div>
<pre><code>## $means
##       Births        Death      InfMort     Minority       Over65      PopChng 
## 1.288043e+01 9.958696e+00 1.030652e+01 4.001522e+01 1.270000e+01 1.365870e+01 
##      PopDens        Urban       Income      ConsInc      FarmInc     ManIncom 
## 1.230696e+02 4.268913e+01 3.359683e+04 4.770609e+02 5.935913e+02 2.552570e+03 
##       RetInc      FdStmps      MoblHms        NoCar     PlumProb    PoorChild 
## 7.234891e+02 2.683913e+01 2.627609e+01 1.102391e+01 9.065217e-01 2.214783e+01 
##        Unemp        Coll4        Crime       HSGrad       JuvDel      MVDeath 
## 6.630435e+00 1.556522e+01 4.677804e+02 7.143043e+01 6.576087e+01 3.070652e+01 
##     SchlSpnd 
## 7.750783e+03 
## 
## $t.test.1
## 
##  One Sample t-test
## 
## data:  scdata[1, ]
## t = 1.3593, df = 24, p-value = 0.1867
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  -931.9975 4527.7575
## sample estimates:
## mean of x 
##   1797.88</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="manipulating-data.html#cb221-1" aria-hidden="true" tabindex="-1"></a>valuelist<span class="sc">$</span>t.test<span class="fl">.1</span></span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  scdata[1, ]
## t = 1.3593, df = 24, p-value = 0.1867
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  -931.9975 4527.7575
## sample estimates:
## mean of x 
##   1797.88</code></pre>
<p>There are a variety of ways to add new elements to a list. The safest is possibly to simply put it in with the name you want:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="manipulating-data.html#cb223-1" aria-hidden="true" tabindex="-1"></a>valuelist<span class="sc">$</span>t.test<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">t.test</span>(scdata[<span class="dv">2</span>, ])</span>
<span id="cb223-2"><a href="manipulating-data.html#cb223-2" aria-hidden="true" tabindex="-1"></a>valuelist</span></code></pre></div>
<pre><code>## $means
##       Births        Death      InfMort     Minority       Over65      PopChng 
## 1.288043e+01 9.958696e+00 1.030652e+01 4.001522e+01 1.270000e+01 1.365870e+01 
##      PopDens        Urban       Income      ConsInc      FarmInc     ManIncom 
## 1.230696e+02 4.268913e+01 3.359683e+04 4.770609e+02 5.935913e+02 2.552570e+03 
##       RetInc      FdStmps      MoblHms        NoCar     PlumProb    PoorChild 
## 7.234891e+02 2.683913e+01 2.627609e+01 1.102391e+01 9.065217e-01 2.214783e+01 
##        Unemp        Coll4        Crime       HSGrad       JuvDel      MVDeath 
## 6.630435e+00 1.556522e+01 4.677804e+02 7.143043e+01 6.576087e+01 3.070652e+01 
##     SchlSpnd 
## 7.750783e+03 
## 
## $t.test.1
## 
##  One Sample t-test
## 
## data:  scdata[1, ]
## t = 1.3593, df = 24, p-value = 0.1867
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  -931.9975 4527.7575
## sample estimates:
## mean of x 
##   1797.88 
## 
## 
## $t.test.2
## 
##  One Sample t-test
## 
## data:  scdata[2, ]
## t = 1.4203, df = 24, p-value = 0.1684
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  -989.7187 5357.6147
## sample estimates:
## mean of x 
##  2183.948</code></pre>
<p>Using the <code>append()</code> command can often have unintended consequences:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="manipulating-data.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">append</span>(valuelist, <span class="fu">t.test</span>(scdata[<span class="dv">3</span>, ]))</span></code></pre></div>
<pre><code>## $means
##       Births        Death      InfMort     Minority       Over65      PopChng 
## 1.288043e+01 9.958696e+00 1.030652e+01 4.001522e+01 1.270000e+01 1.365870e+01 
##      PopDens        Urban       Income      ConsInc      FarmInc     ManIncom 
## 1.230696e+02 4.268913e+01 3.359683e+04 4.770609e+02 5.935913e+02 2.552570e+03 
##       RetInc      FdStmps      MoblHms        NoCar     PlumProb    PoorChild 
## 7.234891e+02 2.683913e+01 2.627609e+01 1.102391e+01 9.065217e-01 2.214783e+01 
##        Unemp        Coll4        Crime       HSGrad       JuvDel      MVDeath 
## 6.630435e+00 1.556522e+01 4.677804e+02 7.143043e+01 6.576087e+01 3.070652e+01 
##     SchlSpnd 
## 7.750783e+03 
## 
## $t.test.1
## 
##  One Sample t-test
## 
## data:  scdata[1, ]
## t = 1.3593, df = 24, p-value = 0.1867
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  -931.9975 4527.7575
## sample estimates:
## mean of x 
##   1797.88 
## 
## 
## $t.test.2
## 
##  One Sample t-test
## 
## data:  scdata[2, ]
## t = 1.4203, df = 24, p-value = 0.1684
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  -989.7187 5357.6147
## sample estimates:
## mean of x 
##  2183.948 
## 
## 
## $statistic
##        t 
## 1.605274 
## 
## $parameter
## df 
## 24 
## 
## $p.value
## [1] 0.1215129
## 
## $conf.int
## [1] -427.6675 3421.5075
## attr(,&quot;conf.level&quot;)
## [1] 0.95
## 
## $estimate
## mean of x 
##   1496.92 
## 
## $null.value
## mean 
##    0 
## 
## $stderr
## [1] 932.501
## 
## $alternative
## [1] &quot;two.sided&quot;
## 
## $method
## [1] &quot;One Sample t-test&quot;
## 
## $data.name
## [1] &quot;scdata[3, ]&quot;</code></pre>
<p>This happened because the output of <code>t.test()</code> (like many functions) was already a list, and so <code>append()</code> simply concatonated the two lists.</p>
</div>
<div id="an-example" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> An example<a href="manipulating-data.html#an-example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following example ties several of the above ideas together. Imagine that we have a set of grades from a course that we would like to convert to letter grades using a particular weighting and letter-grade cut-offs.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="manipulating-data.html#cb227-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_table</span>(<span class="st">&quot;data/CourseData.txt&quot;</span>)[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb227-2"><a href="manipulating-data.html#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(students)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##   College  Year  Hmwk    E1    E2    E3
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 NU          1  83.8    79    89    59
## 2 NU          1  77.1    60    97    63
## 3 NU          1  94.5    83    88    69
## 4 NU          1  84.3    91    77    72
## 5 NU          1  73.4    68    79    76
## 6 NU          1  94.7    89    96    79</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="manipulating-data.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(students)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##   College  Year  Hmwk    E1    E2    E3
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 MC          2  83.2    69    77    93
## 2 MC          2  95.7    88    89    92
## 3 MC          2  79.3    80    61    97
## 4 MC          2  78.1    69    89    97
## 5 MC          2  99.1    84    89    96
## 6 MC          2  95.8    96   100   100</code></pre>
<p>In this particular case we want the weighting to be:</p>
<ul>
<li>20% to Hmwk (col 3)</li>
<li>25% to E1 (col 4)</li>
<li>25% to E2 (col 5)</li>
<li>30% to E3 (col 6)</li>
</ul>
<p>But those weights could change later. A function can be written to take the data, and the weights and calculate the weighted average. We can then add that score to the students data frame, and add a final column with the actual letter grades on a 90-80-70-60 scale.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="manipulating-data.html#cb231-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> students <span class="sc">%&gt;%</span> </span>
<span id="cb231-2"><a href="manipulating-data.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Final =</span> .<span class="dv">2</span><span class="sc">*</span>Hmwk <span class="sc">+</span> .<span class="dv">25</span><span class="sc">*</span>E1 <span class="sc">+</span> .<span class="dv">25</span><span class="sc">*</span>E2 <span class="sc">+</span> .<span class="dv">3</span><span class="sc">*</span>E3,</span>
<span id="cb231-3"><a href="manipulating-data.html#cb231-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Grade =</span> <span class="fu">case_when</span>(</span>
<span id="cb231-4"><a href="manipulating-data.html#cb231-4" aria-hidden="true" tabindex="-1"></a>           Final <span class="sc">&lt;</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">&quot;F&quot;</span>,</span>
<span id="cb231-5"><a href="manipulating-data.html#cb231-5" aria-hidden="true" tabindex="-1"></a>           Final <span class="sc">&lt;</span> <span class="dv">69</span> <span class="sc">~</span> <span class="st">&quot;D&quot;</span>,</span>
<span id="cb231-6"><a href="manipulating-data.html#cb231-6" aria-hidden="true" tabindex="-1"></a>           Final <span class="sc">&lt;</span> <span class="dv">79</span> <span class="sc">~</span> <span class="st">&quot;C&quot;</span>,</span>
<span id="cb231-7"><a href="manipulating-data.html#cb231-7" aria-hidden="true" tabindex="-1"></a>           Final <span class="sc">&lt;</span> <span class="dv">89</span> <span class="sc">~</span> <span class="st">&quot;B&quot;</span>,</span>
<span id="cb231-8"><a href="manipulating-data.html#cb231-8" aria-hidden="true" tabindex="-1"></a>           Final <span class="sc">&gt;=</span> <span class="dv">90</span> <span class="sc">~</span> <span class="st">&quot;A&quot;</span>))</span>
<span id="cb231-9"><a href="manipulating-data.html#cb231-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-10"><a href="manipulating-data.html#cb231-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(students)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 8
##   College  Year  Hmwk    E1    E2    E3 Final Grade
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
## 1 NU          1  83.8    79    89    59  76.5 C    
## 2 NU          1  77.1    60    97    63  73.6 C    
## 3 NU          1  94.5    83    88    69  82.4 B    
## 4 NU          1  84.3    91    77    72  80.5 B    
## 5 NU          1  73.4    68    79    76  74.2 C    
## 6 NU          1  94.7    89    96    79  88.9 B</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="statistical-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graphics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-manipulating-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
